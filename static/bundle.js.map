{"version":3,"sources":["webpack:///webpack/bootstrap 75f3f32e87b35a2c70ba","webpack:///./src/util/dom_helper.ts","webpack:///./src/util/log.ts","webpack:///external \"React\"","webpack:///./src/constants.ts","webpack:///./src/core/range_cache.ts","webpack:///./src/core/block.ts","webpack:///./src/core/node_measure.ts","webpack:///./src/components/Footnote.tsx","webpack:///./src/core/selector.ts","webpack:///./src/decorator/decorated_block.ts","webpack:///./src/decorator/decorator.ts","webpack:///./src/util/markdown.ts","webpack:///external \"ReactDOM\"","webpack:///./src/components/Item.tsx","webpack:///./src/components/Row.tsx","webpack:///./src/core/dimension.ts","webpack:///./src/core/node_context.ts","webpack:///./src/core/node_measure_impl.ts","webpack:///./src/core/range_helper.ts","webpack:///./src/core/range_meta.ts","webpack:///./src/util/array_helper.ts","webpack:///./src/util/id_helper.ts","webpack:///./src/app.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 75f3f32e87b35a2c70ba","import {debug, warn} from './log';\nexport function asArray(collection: any) {\n  return Array.prototype.slice.apply(collection);\n}\n\nexport function select(w: Window, r: Range) {\n  let sel = w.getSelection();\n  sel.removeAllRanges();\n  sel.addRange(r);\n}\n\nexport function getSelectedRange(w: Window): Range {\n  try {\n    return w.getSelection().getRangeAt(0);\n  } catch (ignore) {\n    return null;\n  }\n}\n\nexport function clearSelection(w: Window) {\n  w.getSelection().removeAllRanges();\n}\n\n/**\n * Find the first element containing n that can be used as a position anchor.\n */\nexport function findPositionAnchor(\n    w: Window, n: Node): HTMLElement {\n  let e: HTMLElement = null;\n  if (n.nodeType != Node.ELEMENT_NODE) {\n    e = n.parentElement;\n  } else {\n    e = n as HTMLElement;\n  }\n  if (e == null) {\n    throw 'no element parent found';\n  }\n  do {\n    let stl = w.getComputedStyle(e);\n    if (stl.position == \"relative\" || stl.position == \"fixed\") {\n      return e;\n    } else {\n      e = e.parentElement;\n    }\n  } while (e);\n  let b = w.document.body;\n  warn(`no position anchor found, using body (${w.getComputedStyle(b).position}).`);\n  return b;\n}\n\nexport function computeUniquePath(n: Node): string {\n  let path = '';\n  if (n.nodeType == Node.ELEMENT_NODE) {\n    let e = n as HTMLElement;\n    if (e.id) {\n      return `#${e.id}`;\n    }\n  }\n  if (n.nodeName == 'BODY') {\n    return '/';\n  }\n  let siblings: Node[] = asArray(n.parentNode.childNodes);\n  let idx = siblings.indexOf(n);\n  return computeUniquePath(n.parentNode) + `/${idx}`;\n}\n\nexport function getNodeByPath(doc: Document, uPath: string): Node {\n  let n: Node = doc.body;\n  let parts: string[] = uPath.split('/');\n  for (let p of parts) {\n    if (!p.trim()) {\n      continue;\n    }\n    if (p.indexOf('#') == 0) {\n      n = doc.getElementById(p.substring(1));\n      continue;\n    }\n    n = n.childNodes[parseInt(p)];\n  }\n  return n;\n}\n\nexport enum BoxSizing {\n  ContentBox,\n  BorderBox,\n}\n\nexport function getBoxSizing(w: Window, e: HTMLElement): BoxSizing {\n  let bs = w.getComputedStyle(e).boxSizing;\n  if (bs == 'content-box') {\n    return BoxSizing.ContentBox;\n  } else if (bs = 'border-box') {\n    return BoxSizing.BorderBox;\n  } else {\n    throw 'unknown box sizing option.';\n  }\n}\n\nexport function getStyleNumber(stl: CSSStyleDeclaration, name :string): number {\n  let strVal = ((stl as any)[name] as string);\n  let match = /\\d+/.exec(strVal);\n  if (match){\n    return Number(match[0]);\n  }\n  throw Error(`cannot parse number from style ${name}: ${strVal}`);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/dom_helper.ts","export enum LogLevel {\n  DEBUG = 0,\n  INFO,\n  WARN,\n  ERROR\n}\n\nlet __level: LogLevel = LogLevel.DEBUG;\n\nexport function setLogLevel(level: LogLevel) {\n  __level = level;\n}\n\nfunction levelToString(level: LogLevel): string {\n  switch (level) {\n    case LogLevel.DEBUG:\n      return 'debug';\n    case LogLevel.INFO:\n      return 'info';\n    case LogLevel.WARN:\n      return 'warn';\n    case LogLevel.ERROR:\n      return 'error';\n    default:\n      return 'debug';\n  }\n}\n\nfunction log(level: LogLevel, messages: any[]):void{\n  if (level >= __level) {\n    if (console) {\n      let stub = levelToString(level);\n      if (messages.length <= 0) {\n        messages = ['\\r\\n'];\n      }\n      let msg: any = messages.length > 1 ? messages : messages[0];\n      try{\n        ((<any> console)[stub])(msg);\n      } catch (ignore){}\n    }\n  }\n}\n\nexport function debug(...messages: any[]):void{\n  log(LogLevel.DEBUG, messages);\n}\n\nexport function info(...messages: any[]):void{\n  log(LogLevel.INFO, messages);\n}\n\nexport function warn(...messages: any[]):void{\n  log(LogLevel.WARN, messages);\n}\n\nexport function error(...messages: any[]):void{\n  log(LogLevel.ERROR, messages);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/log.ts","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 2\n// module chunks = 0","\nexport function MeasureSpanClass(): string {\n  return 'hlc_measure_span';\n}\n\nexport function DefaultColor(): string{\n  return \"green\";\n}\n\nexport function DefaultFocusColor(): string{\n  return \"green\";\n}\n\nexport function DefaultOpacity(): number {\n  return 0.25;\n}\n\nexport function DefaultZIndex(): number{\n  return 99999999;\n}\n\nexport function SameRowHFactor(): number{\n  return 8;\n}\n\nexport function SameRowVFactor(): number{\n  return 0.25;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/constants.ts","import { RangeMeta } from './range_meta';\nimport { computeUniquePath, findPositionAnchor } from '../util/dom_helper';\n/**\n * DOM Range object will change if DOM tree changed.\n * RangeCache will not.\n * You should use RangeCache.make(doc, range) method to creat an\n * intance.\n */\nexport class RangeCache {\n  private m_cac: Node;\n  private m_start: Node;\n  private m_end: Node;\n  private m_startOffset: number;\n  private m_endOffset: number;\n  private m_document: Document;\n  private m_meta: RangeMeta;\n\n  constructor(\n      doc: Document, cac: Node, start: Node, end: Node, startOffset: number,\n      endOffset: number, meta?: RangeMeta) {\n    [this.m_document, this.m_cac, this.m_start, this.m_end, this.m_startOffset,\n     this.m_endOffset] = [doc, cac, start, end, startOffset, endOffset];\n    this.setMeta(meta);\n  }\n\n  /**\n   * A range expires when the dom sub tree is destroyed.\n   */\n  isExpired(): boolean{\n    for (let n of [this.m_cac, this.m_start, this.m_end]){\n      if (!n || !n.parentNode){\n        return true;\n      }\n    }\n    return false;\n  }\n\n  toRange(doc: Document): Range {\n    let r = doc.createRange();\n    r.setStart(this.m_start, this.m_startOffset);\n    r.setEnd(this.m_end, this.m_endOffset);\n    return r;\n  }\n\n  get document(): Document {\n    return this.m_document;\n  }\n\n  get commonAncestorContainer(): Node {\n    return this.m_cac;\n  }\n\n  get startContainer(): Node {\n    return this.m_start;\n  }\n\n  get endContainer(): Node {\n    return this.m_end;\n  }\n\n  get startOffset(): number {\n    return this.m_startOffset;\n  }\n\n  get endOffset(): number {\n    return this.m_endOffset;\n  }\n\n  get meta(): RangeMeta {\n    return this.m_meta;\n  }\n\n  private setMeta(meta: RangeMeta){\n    if (!meta) {\n      let anchor: Node = findPositionAnchor(this.m_document.defaultView, this.m_cac);\n      this.m_meta = new RangeMeta(\n          [\n            computeUniquePath(anchor), \n            computeUniquePath(this.m_start),\n            computeUniquePath(this.m_end),\n            this.toRange(this.m_document).toString()\n          ],\n          [this.m_startOffset, this.m_endOffset]);\n    } else {\n      this.m_meta = meta;\n    }\n  }\n\n  static make: (doc: Document, r: Range, meta?: RangeMeta) => RangeCache =\n      function(doc: Document, r: Range, meta?: RangeMeta): RangeCache {\n    return new RangeCache(\n        doc, r.commonAncestorContainer, r.startContainer, r.endContainer,\n        r.startOffset, r.endOffset, meta);\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/range_cache.ts","import { RangeCache } from './range_cache';\nimport { Dimension } from './dimension';\nimport { computeDimentions } from './node_measure';\nimport { RangeMeta } from \"./range_meta\";\n\n/**\n * A block of a text highlighted in one selection\n */\nexport class Block {\n  private m_id: string;\n  private m_rangeCache: RangeCache;\n  private m_dimensions: Dimension[];\n\n  constructor(id: string, rangeCache: RangeCache, dimensions: Dimension[]) {\n    this.m_id = id;\n    this.m_rangeCache = rangeCache;\n    this.m_dimensions = dimensions;\n  }\n\n  public setId(id: string){\n    this.m_id = id;\n  }\n\n  public get id(): string {\n    return this.m_id;\n  }\n\n  get rangeCache(): RangeCache {\n    return this.m_rangeCache;\n  }\n\n  get rangeMeta(): RangeMeta{\n    return this.m_rangeCache.meta;\n  }\n\n  get dimensions(): Dimension[] {\n    return this.m_dimensions;\n  }\n\n  get text(): string{\n    return this.rangeMeta.text;\n  }\n\n  /**\n   * recalculateDimension\n   * Recalculate dimensions of the range again.\n   */\n  public recalculateDimension() {\n    this.m_dimensions =\n        computeDimentions(this.m_rangeCache.document, this.m_rangeCache);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/block.ts","import { NodeContext } from './node_context';\nimport { Dimension } from './dimension';\nimport { RangeCache } from './range_cache';\nimport { getNodeByPath } from '../util/dom_helper';\nimport {extend} from '../util/array_helper';\nimport {debug} from '../util/log';\n\nimport {\n  computeLayout,\n  getElementOffsetLayout,\n  measureSpanToDim,\n  mergeDimensions,\n  restoreBeforeMeasureStatus,\n  substitudeWithMeasureSpan\n} from './node_measure_impl';\nimport {NodeVisitor} from './node_visitor';\nimport { correctRange, isRange, iterateRangeNodes } from './range_helper';\n\nexport function computeDimentions(\n    doc: Document, range: Range|RangeCache): Dimension[] {\n  let dims: Dimension[] = [];\n  let rc: RangeCache = null;\n  if (isRange(range)) {\n    rc = RangeCache.make(doc, range);\n  } else {\n    rc = range;\n  }\n  rc = correctRange(rc);\n  iterateRangeNodes(rc, buildNodeToDimVisitor(document, dims));\n  dims = mergeDimensions(dims);\n  debug('computed dimensions: ')\n  dims.forEach((v) => {\n    debug(v.toString());\n  });\n  debug('- - - - - - - - - -');\n  return dims;\n}\n\nfunction buildNodeToDimVisitor(\n    doc: Document, result: Dimension[]): NodeVisitor {\n  return function(n, ctx, s, e): void {\n    let dims = nodeToDimensions(doc, n, ctx, s, e);\n    extend(result, dims);\n  };\n}\n\nfunction nodeToDimensions(\n    doc: Document, n: Node, ctx: NodeContext, start: number,\n    end: number): Dimension[] {\n  if (n.nodeType == Node.TEXT_NODE) {\n    return textNodeToDim(doc, n, ctx, start, end);\n  } else {\n    return [];\n  }\n}\n\nfunction textNodeToDim(\n    doc: Document, n: Node, ctx: NodeContext, start: number,\n    end: number): Dimension[] {\n  let span: HTMLSpanElement =\n      substitudeWithMeasureSpan(doc, n, ctx, start, end);\n  let dims: Dimension[] = \n    measureSpanToDim(span, doc, (doc: Document, el: HTMLElement)=>{\n      let anchor = getNodeByPath(doc, ctx.rangeCache.meta.anchorUPath) as HTMLElement;\n      return computeLayout(doc, anchor, el);\n    });\n  restoreBeforeMeasureStatus(ctx.parent, ctx.index, ctx.siblings);\n  return dims;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/node_measure.ts","import { debug } from '../util/log';\nimport { Item } from './Item';\nimport { DecoratedBlock } from '../decorator/decorated_block';\nimport * as React from \"react\";\n\ninterface FootnoteProps {\n  id: string\n  source?: {\n    get: () => DecoratedBlock[]\n    poll: boolean\n    interval?: number\n  }\n  onMount: (instance: Footnote) => void\n}\n\ninterface FootnoteState {\n  highlights: DecoratedBlock[]\n}\n\nexport class Footnote extends React.Component<FootnoteProps, FootnoteState>{\n  constructor() {\n    super();\n    this.state = { highlights: [] } as FootnoteState;\n  }\n\n  componentDidMount() {\n    if (this.props.source) {\n      this.addBatch(this.props.source.get());\n      if (this.props.source.poll) {\n        setInterval(() => {\n          this.addBatch(this.props.source.get());\n        }, this.props.source.interval);\n      }\n    }\n    this.props.onMount(this);\n  }\n\n  addHighlight(h: DecoratedBlock) {\n    this.addBatch([h]);\n  }\n\n  addBatch(hs: DecoratedBlock[]) {\n    let hlts = this.state.highlights.slice();\n    for (let h of hs) {\n      hlts.push(h);\n    }\n    this.setState({ highlights: hlts });\n  }\n\n  removeHighlight(id: string): boolean {\n    let hlts = this.state.highlights.slice();\n    let found = false;\n    for (let idx = 0; idx < hlts.length; idx++) {\n      let h = hlts[idx];\n      if (h.id == id) {\n        hlts.splice(idx, 1);\n        found = true;\n        this.setState({ highlights: hlts });\n        break\n      }\n    }\n    return found;\n  }\n\n  removeAll() {\n    this.setState({ highlights: [] });\n  }\n\n  getAll(): DecoratedBlock[]{\n    return this.state.highlights.slice();\n  }\n\n  onHighlightClick(i: number, e: MouseEvent) {\n    debug(`${i} was clicked.`)\n  }\n\n  render(): JSX.Element {\n    return <div id={this.props.id} >\n      {this.state.highlights.map((blk, idx) =>\n        <Item\n          key={blk.id}\n          block={blk}\n          onClick={(e: MouseEvent) => this.onHighlightClick(idx, e)} />)}\n    </div>;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/Footnote.tsx","import { RangeMeta } from './range_meta';\nimport { RangeCache } from './range_cache';\nimport { clearSelection, getNodeByPath, getSelectedRange } from '../util/dom_helper';\nimport {generateRandomUUID} from '../util/id_helper';\nimport {debug, warn} from '../util/log';\n\nimport {Block} from './block';\nimport {computeDimentions} from './node_measure';\n\n/**\n * Detect if the given window has a expanded selection range.\n * Return a Block object containing the dimension information\n * of the range or null.\n * \n * @param win window object to extract selection\n * @param doc document object of the window\n * @param id [optional] if present, use it as the\n * Block object's id; otherwise generate a random uuid.\n */\nexport function extractSelectedBlock(\n    win: Window, doc: Document, id?: string): Block {\n  let range: Range = getSelectedRange(win);\n  if (null == range || range.collapsed) {\n    debug('no selected range detected.');\n    return null;\n  }\n  let rc = RangeCache.make(doc, range);\n  clearSelection(win);\n  return generateBlock(doc, rc, id);\n}\n\n/**\n * Rebuild a block using given metadata. \n * \n * @param win window object to extract selection\n * @param doc document object of the window\n * @param meta metadata used to restore the block. See @class{RangeMeta}\n * @param id [optional] if present, use it as the\n * Block object's id; otherwise generate a random uuid.\n */\nexport function restoreBlock(win: Window, doc: Document, meta: RangeMeta, id?:string): Block{\n  let rc = restoreRangeCache(doc, meta);\n  return generateBlock(doc, rc, id);\n}\n\nfunction generateBlock(doc: Document, rangeCache: RangeCache, id?: string): Block{\n  let dims = computeDimentions(doc, rangeCache);\n  if (!id) {\n    id = generateRandomUUID();\n  }\n  return new Block(id, rangeCache, dims);\n}\n\nfunction restoreRangeCache(doc: Document, meta: RangeMeta): RangeCache {\n  let rangeAnchors: Node[] = [];\n  for (let uPath of [meta.startNodeUPath, meta.endNodeUPath]) {\n    try {\n      let n = getNodeByPath(doc, uPath);\n      rangeAnchors.push(n);\n    } catch (e) {\n      warn(e);\n      return null;\n    }\n  }\n  let r = doc.createRange();\n  r.setStart(rangeAnchors[0], meta.startCharIndex);\n  r.setEnd(rangeAnchors[1], meta.endCharIndex);\n  let rc: RangeCache = RangeCache.make(doc, r, meta);\n  return rc;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/selector.ts","import { Dimension } from '../core/dimension';\nimport { RangeCache } from '../core/range_cache';\nimport { Decorator } from './decorator';\nimport { Block } from '../core/block';\nimport { CSSProperties } from \"@types/react\";\n\n\nexport class DecoratedBlock extends Block {\n  private m_styles: CSSProperties[];\n  constructor(id: string, rc: RangeCache, m: Dimension[], s: CSSProperties[]) {\n    super(id, rc, m);\n    this.m_styles = s;\n  }\n\n  get styles(): CSSProperties[] {\n    return this.m_styles;\n  }\n\n  decorate(decorator: Decorator) {\n    for (let i = 0; i < this.dimensions.length; i++) {\n      let dim = this.dimensions[i];\n      let stl = this.m_styles[i];\n      decorator(dim, stl);\n    }\n  }\n}\n\nexport class DecoratedBlockFactory {\n  private m_decorators: Decorator[];\n  private m_block: Block;\n\n  constructor(block: Block) {\n    this.m_block = block;\n    this.m_decorators = []\n  }\n\n  addDecorator(d: Decorator) {\n    this.m_decorators.push(d);\n    return this;\n  }\n\n  make(): DecoratedBlock {\n    let styles: CSSProperties[] = [];\n    for (let dim of this.m_block.dimensions) {\n      let s = {} as CSSProperties;\n      for (let decorate of this.m_decorators) {\n        decorate(dim, s);\n      }\n      styles.push(s);\n    }\n\n    return new DecoratedBlock(\n      this.m_block.id,\n      this.m_block.rangeCache,\n      this.m_block.dimensions,\n      styles);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/decorator/decorated_block.ts","import { Dimension } from '../core/dimension';\nimport { DefaultColor, DefaultOpacity, DefaultZIndex } from '../constants';\nimport {CSSProperties} from '@types/react';\n\nexport interface Decorator { (dim: Dimension, styles: CSSProperties): void; }\n\nexport function BasicDecorator(dim: Dimension, styles: CSSProperties): void{\n  styles.position = dim.Fixed ? \"fixed\" : \"absolute\";\n  styles.top = dim.Top;\n  styles.left = dim.Left;\n  styles.width = dim.Width;\n  styles.height = dim.Height;\n  styles.backgroundColor = DefaultColor();\n  styles.opacity = DefaultOpacity();\n  styles.zIndex = DefaultZIndex();\n  styles.pointerEvents = \"none\";\n}\n\n\n// WEBPACK FOOTER //\n// ./src/decorator/decorator.ts","\n/**\n * Unsafely generating markdown formatted text\n * https://guides.github.com/features/mastering-markdown/#syntax\n */\n\nexport function h(level: number, text: string): string {\n  return `${repeat('#', level)} ${text}`;\n}\n\nexport function em(text: string): string{\n  return `_${text}_`;\n}\n\nexport function link(text: string, link:string): string{\n  return `[${text}](${link})`;\n}\n\nexport function ul(items: string[], level: number = 0): string{\n  let md = \"\";\n  for (let item of items){\n    md += `${repeat(\"  \", level)}* ${item}\\r\\n`\n  }\n  return md;\n}\n\n/**\n * Reference:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat#Polyfill\n * @param text text to repeat \n * @param count time to repeat\n */\nfunction repeat(text: string, count: number): string{\n  if (text == null){\n    throw new Error(\"cannot repeat null\");\n  }\n  let str = \"\" + text;\n  if (count < 0){\n    throw new Error(\"Cannot repeat negative times\");\n  }\n  if (count == Infinity){\n    throw new Error(\"Cannot repeat infinite times\");\n  }\n  count = Math.floor(count);\n  if (str.length == 0 || count == 0){\n    return \"\"\n  }\n  if (str.length * count >= 1 << 28){\n    throw new RangeError(\"repeat count must not overflow maximum string size\");\n  }\n  let rpt = '';\n  for (;;){\n    if ((count & 1) == 1){\n      rpt += str;\n    }\n    count >>>= 1;\n    if (count == 0){\n      break;\n    }\n    str += str;\n  }\n  return rpt;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/markdown.ts","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 12\n// module chunks = 0","import { Row } from './Row';\nimport { DecoratedBlock } from '../decorator/decorated_block';\nimport * as React from \"react\";\n\nexport interface ItemProps{\n  block: DecoratedBlock;\n  onClick?: EventListener;\n}\n\nexport const Item = (props: ItemProps) => \n<div onClick={(e)=>props.onClick}>\n  {props.block.styles.map((stl, i)=><Row key={i} style={stl}/>)}\n</div>\n\n\n// WEBPACK FOOTER //\n// ./src/components/Item.tsx","import * as React from \"react\";\nimport { CSSProperties } from \"react\";\n\nexport interface RowProps{\n  style: CSSProperties;\n  onMouseOver?: EventListener;\n  onMouseOut?: EventListener;\n  onClick?: EventListener;\n}\n\n/**\n * Row represents one highlight unit\n */\nexport const Row = (props: RowProps) => \n<div style={props.style}\n  onClick={()=>props.onClick} \n  onMouseOver={()=>props.onMouseOver}\n  onMouseOut={()=>props.onMouseOut}></div>\n\n\n// WEBPACK FOOTER //\n// ./src/components/Row.tsx","/**\n * Measurements of a rectangular block.\n */\nexport class Dimension {\n  private m_x: number;\n  private m_y: number;\n  private m_width: number;\n  private m_height: number;\n  private m_fixed: boolean;\n\n  constructor([x, y, w, h]: number[]) {\n    [this.m_x, this.m_y, this.m_width, this.m_height] = [x, y, w, h];\n    this.m_fixed = false;\n  }\n\n  get Left(): number {\n    return this.m_x;\n  }\n  get Top(): number {\n    return this.m_y;\n  }\n  get Width(): number {\n    return this.m_width;\n  }\n  get Height(): number {\n    return this.m_height;\n  }\n\n  setFixed(): void {\n    this.m_fixed = true;\n  }\n\n  get Fixed(): boolean{\n    return this.m_fixed;\n  }\n\n  toString(): string {\n    let d = this;\n    return `{(${d.Left}, ${d.Top}), ${d.Width} x ${d.Height}}`;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/dimension.ts","import { RangeCache } from './range_cache';\nimport { asArray } from '../util/dom_helper';\n/**\n * Store the context information of a node. This is useful if you\n * are about to temporarily take the node off the dom tree / fragment.\n */\nexport class NodeContext {\n  private m_parent: Node;\n  private m_nextSibling: Node;\n  private m_siblings: Node[];\n  private m_index: number;\n  private m_rangeCache : RangeCache;\n\n  constructor(n: Node, rc?: RangeCache) {\n    this.m_parent = n.parentNode;\n    this.m_nextSibling = n.nextSibling;\n    this.m_siblings = asArray(n.parentNode.childNodes);\n    this.m_rangeCache = rc;\n    this.m_index = this.m_siblings.indexOf(n);\n  }\n\n  public get parent(): Node {\n    return this.m_parent;\n  }\n\n  public get nextSibling(): Node {\n    return this.m_nextSibling;\n  }\n\n  public get siblings(): Node[] {\n    return this.m_siblings;\n  }\n\n  public get index(): number {\n    return this.m_index;\n  }\n\n  public get rangeCache(): RangeCache{\n    return this.m_rangeCache;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/node_context.ts","import { NodeContext } from './node_context';\nimport { Dimension } from './dimension';\nimport * as constants from '../constants';\nimport { SameRowHFactor, SameRowVFactor } from '../constants';\nimport * as dom_helper from '../util/dom_helper';\nimport { BoxSizing, getBoxSizing, getStyleNumber } from '../util/dom_helper';\nimport { debug, error } from '../util/log'\n\nimport { LayoutCalculator } from './layout_calculator';\n\nexport function measureSpanToDim(\n  s: HTMLSpanElement, doc: Document, calc: LayoutCalculator): Dimension[] {\n  let cspans: HTMLElement[] = dom_helper.asArray(s.children);\n  let dims: Dimension[] = [];\n  for (let span of cspans) {\n    let dim = calc(doc, span);\n    dims.push(dim);\n  }\n  return dims;\n}\n\nexport function mergeDimensions(dims: Dimension[]): Dimension[] {\n  let merged: Dimension[] = [];\n  let current: Dimension = null;\n  let pre: Dimension = null;\n  const maxIdx: number = dims.length - 1;\n  for (let i in dims) {\n    let d: Dimension = dims[i];\n    if (current == null) {\n      current = d;\n      pre = d;\n      continue;\n    }\n    const charW: number = pre.Width;\n    const charH: number = pre.Height;\n    if (isInsameRow(d, current, charW, charH)) {\n      current = doMerge(d, current);\n    } else {\n      merged.push(current);\n      current = d;\n    }\n    if (Number(i) == maxIdx) {\n      merged.push(current);\n    } else {\n      pre = d;\n    }\n  }\n  return merged;\n}\n\nexport function isInsameRow(\n  a: Dimension, b: Dimension, charW: number, charH: number): boolean {\n  if (a.Left > b.Left) {\n    [a, b] = [b, a]\n  }\n  const maxHGap = charW * SameRowHFactor();\n  const maxVGap = charH * SameRowVFactor();\n  let h_gap = b.Left - (a.Left + a.Width);\n  let isInRangeHorizontal = h_gap <= maxHGap;\n  let v_gap = Math.abs(a.Top - b.Top);\n  let isInRangeVertical = v_gap <= maxVGap;\n  return isInRangeHorizontal && isInRangeVertical;\n}\n\nexport function doMerge(a: Dimension, b: Dimension): Dimension {\n  if (a.Left > b.Left) {\n    [a, b] = [b, a]\n  }\n  let top: number = Math.min(a.Top, b.Top);\n  let height: number = Math.max(a.Top + a.Height - top, b.Top + b.Height - top);\n  return new Dimension([a.Left, top, (b.Left + b.Width - a.Left), height]);\n}\n\nexport function substitudeWithMeasureSpan(\n  doc: Document, n: Node, ctx: NodeContext, start: number,\n  end: number): HTMLSpanElement {\n  // ignore non-text nodes.\n  if (n.nodeType != Node.TEXT_NODE) {\n    return;\n  }\n  removeFollowing(ctx.parent, ctx.index);\n  let parent = ctx.parent;\n  parent.removeChild(n);\n  let preTextNode: Node = doc.createTextNode(n.textContent.substring(0, start));\n  const selText = n.textContent.substring(start, end);\n  let textNode: Node = doc.createTextNode(selText);\n  let postTextNode: Node =\n    doc.createTextNode(n.textContent.substring(end, n.textContent.length));\n  parent.appendChild(preTextNode);\n  let wrapper = wrapText(doc, textNode);\n  parent.appendChild(wrapper);\n  parent.appendChild(postTextNode);\n  appendFollowing(parent, ctx.index, ctx.siblings);\n  return wrapper;\n}\n\nexport function restoreBeforeMeasureStatus(\n  parent: Node, nodeIdx: number, siblings: Node[]) {\n  removeFollowing(parent, nodeIdx - 1);\n  appendFollowing(parent, nodeIdx - 1, siblings);\n}\n\nexport function removeFollowing(parent: Node, startIdx: number) {\n  let children = dom_helper.asArray(parent.childNodes);\n  for (let i = children.length - 1; i > startIdx; i--) {\n    parent.removeChild(children[i]);\n  }\n}\n\nexport function appendFollowing(\n  parent: Node, nodeIdx: number, siblings: Node[]) {\n  for (let i = nodeIdx + 1; i < siblings.length; i++) {\n    parent.appendChild(siblings[i]);\n  }\n}\n\nexport function wrapText(doc: Document, textNode: Node): HTMLSpanElement {\n  let span: HTMLSpanElement = doc.createElement('span');\n  let text = textNode.textContent;\n  for (let i = 0; i < text.length; i++) {\n    let charSpan: HTMLSpanElement = doc.createElement('span');\n    charSpan.className = constants.MeasureSpanClass();\n    let charNode: Node = doc.createTextNode(text.charAt(i));\n    charSpan.appendChild(charNode);\n    adaptMeasureSpanLayout(charSpan);\n    span.appendChild(charSpan);\n  }\n  adaptMeasureSpanLayout(span);\n  return span;\n}\n\nfunction getContentOffsets(w: Window, doc: Document, e: HTMLElement): Dimension {\n  let rect = e.getBoundingClientRect();\n  let styles = w.getComputedStyle(e);\n  let borderLeft = 0;\n  let borderTop = 0;\n  let boxSizing = getBoxSizing(w, e);\n  if (boxSizing == BoxSizing.ContentBox) {\n    borderLeft = getStyleNumber(styles, \"borderLeftWidth\");\n    borderTop = getStyleNumber(styles, \"borderTopWidth\");\n  }\n  let fixed = false;\n  let scrollY = w.pageYOffset;\n  let scrollX = w.pageXOffset;\n  if (styles.position == \"fixed\"){\n    scrollX = 0;\n    scrollY = 0;\n    fixed = true;\n  }\n  let dim = new Dimension([\n    rect.left + borderLeft + scrollX,\n    rect.top + borderTop + scrollY,\n    rect.width,\n    rect.height]);\n  if (fixed) {\n    dim.setFixed();\n  }\n  return dim;\n}\n\nexport function computeLayout(doc: Document, anchor: HTMLElement, e: HTMLElement): Dimension {\n  let w = doc.defaultView;\n  let eOffset = getContentOffsets(w, doc, e);\n  let anchorStyles = w.getComputedStyle(anchor);\n  if (anchorStyles.position == \"relative\" && !eOffset.Fixed){\n    let anchorOffset = getContentOffsets(w, doc, anchor);\n    return new Dimension([\n      eOffset.Left - anchorOffset.Left,\n      eOffset.Top - anchorOffset.Top,\n      eOffset.Width,\n      eOffset.Height\n    ]);\n  }\n  return eOffset;\n}\n\nexport function getElementOffsetLayout(\n  doc: Document, el: HTMLElement): Dimension {\n  return new Dimension(\n    [el.offsetLeft, el.offsetTop, el.offsetWidth, el.offsetHeight]);\n}\n\nexport function adaptMeasureSpanLayout(\n  sp: HTMLSpanElement, debug: boolean = true): void {\n  sp.style.margin = '0';\n  sp.style.padding = '0';\n  sp.style.border = '0';\n  sp.style.font = 'inherit';\n  sp.style.fontSize = 'inherit';\n  sp.style.verticalAlign = 'inherit';\n  if (debug) {\n    sp.style.backgroundColor = 'lightgreen';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/node_measure_impl.ts","import { NodeContext } from './node_context';\nimport { RangeCache } from './range_cache';\nimport {debug, error} from '../util/log'\nimport {NodeVisitor} from './node_visitor';\n\nlet document = null;\n\n/**\n * Iterate through nodes in a range in the following order:\n *   1. first child\n *   2. self\n *   3. next sibling\n *   4. parent's next sibling\n * , until last node in range is met.\n * \n * @param range is a cached object of range. \n *        You should use RangeCache.make(range) to create it.\n * @param visit is a function to be called when a node is visited.\n */\nexport function iterateRangeNodes(range: RangeCache, visit: NodeVisitor) {\n  const endOffset = range.startContainer == range.endContainer ?\n      range.endOffset :\n      getNodeTextEndIdx(range.startContainer);\n  let q: [Node, number, number][] =\n      [[range.startContainer, range.startOffset, endOffset]];\n  while (q.length > 0) {\n    let [node, start, end]: [Node, number, number] = q.shift();\n    if (node.hasChildNodes()) {\n      let next = node.firstChild;\n      let endOffset = next == range.endContainer ? range.endOffset :\n                                                   getNodeTextEndIdx(next);\n      q.push([next, 0, endOffset]);\n      continue;\n    }\n    let ctx = new NodeContext(node, range);\n    visit(node, ctx, start, end);\n    if (node == range.endContainer || node == range.commonAncestorContainer) {\n      return;\n    }\n    if (ctx.nextSibling) {\n      let endOffset = ctx.nextSibling == range.endContainer ?\n          range.endOffset :\n          getNodeTextEndIdx(ctx.nextSibling);\n      q.push([ctx.nextSibling, 0, endOffset]);\n    } else {\n      tracebackParentNodes(ctx.parent, range, q);\n    }\n  }\n  error(\"lastChild\", range.commonAncestorContainer.lastChild);\n  error(\"endContainer\", range.endContainer);\n  error(\"startContainer\", range.startContainer);\n  error(\"commonAncestorContainer:\", range.commonAncestorContainer);\n  throw 'iterateRangeNodes: end of sub dom tree met.';\n}\n\n/**\n * Correct range if needed.\n * For example, make sure the range ends at a leaf node.\n * @param rc \n */\nexport function correctRange(rc: RangeCache): RangeCache{\n  if (rc.endContainer.nodeType == Node.ELEMENT_NODE && \n      rc.endOffset == 0){\n    debug(\"range needs correct.\");\n    let newEnd = rc.endContainer.firstChild;\n    let newEndOffset = 0;\n    return new RangeCache(rc.document, rc.commonAncestorContainer, \n      rc.startContainer, newEnd, rc.startOffset, newEndOffset, rc.meta);\n  } else {\n    return rc;\n  }\n}\n\n/**\n * A helper function to determin if the given object \n * is an instance of Range class.\n * @param r an instance of Range of RangeCache\n */\nexport function isRange(r : Range|RangeCache): r is Range{\n  let asRange : Range = <Range> r;\n  return asRange.collapse !== undefined && asRange.setStart !== undefined;\n}\n\nfunction getNodeTextEndIdx(node: Node): number {\n  return node.textContent.length;\n}\n\nfunction tracebackParentNodes(\n    parent: Node, range: RangeCache, q: [Node, number, number][]) {\n  while (parent != range.commonAncestorContainer) {\n    if (parent.nextSibling) {\n      let next = parent.nextSibling;\n      let endOffset = next == range.endContainer ? range.endOffset :\n                                                   next.textContent.length;\n      q.push([next, 0, endOffset]);\n      break;\n    } else {\n      parent = parent.parentNode;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/range_helper.ts","/**\n * RangeMeta stores UPath informations needed to store and restore a block.\n * UPath is a string used to uniquely locate a node in the dom tree.\n * It's grammar is defined as: \n *    UPath = [<empty>|#<id>]([/<nodeIndex>])+\n */\nexport class RangeMeta {\n  private m_anchorUPath: string;\n  private m_startNodeUPath: string;\n  private m_endNodeUPath: string;\n  private m_startCharIndex: number;\n  private m_endCharIndex: number;\n  private m_text : string ;\n\n  constructor([anchorUPath, startNodeUPath, endNodeUPath, text]: string[], \n  [ startCharIndex, endCharIndex ]: number[]) {\n    [this.m_anchorUPath, this.m_startNodeUPath, this.m_endNodeUPath, this.m_text] =\n        [anchorUPath, startNodeUPath, endNodeUPath, text];\n    [this.m_startCharIndex, this.m_endCharIndex] =\n        [startCharIndex, endCharIndex];\n  }\n\n  get anchorUPath(): string {\n    return this.m_anchorUPath;\n  }\n\n  get startNodeUPath(): string {\n    return this.m_startNodeUPath;\n  }\n\n  public get endNodeUPath(): string {\n    return this.m_endNodeUPath;\n  }\n\n  public get startCharIndex(): number {\n    return this.m_startCharIndex;\n  }\n\n  public get endCharIndex(): number {\n    return this.m_endCharIndex;\n  }\n\n  public get text(): string{\n    return this.m_text;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/range_meta.ts","export function extend(a: Array<any>, b: Array<any>): void{\n  for (let o of b){\n    a.push(o);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/array_helper.ts","export function generateRandomUUID() {\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() +\n      s4() + s4();\n}\n\nfunction s4() {\n  return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/id_helper.ts","import * as Markdown from './util/markdown';\nimport { BasicDecorator } from './decorator/decorator';\nimport { debug, warn } from './util/log';\nimport { Block } from './core/block';\nimport { extractSelectedBlock, restoreBlock } from './core/selector';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport { Footnote } from './components/Footnote';\nimport { DecoratedBlock, DecoratedBlockFactory } from './decorator/decorated_block';\nimport { findPositionAnchor, getNodeByPath } from './util/dom_helper';\nimport { RangeMeta } from \"./core/range_meta\";\n\ninterface FootnoteDict {\n  [key: string]: Footnote\n}\n\nexport interface OnHighlight {\n  (block: DecoratedBlock): void\n}\n\n/**\n * A demo app generate highlights of selected text.\n */\nexport class App {\n\n  constructor(doc: Document) {\n    this.m_ftnotes = {} as FootnoteDict;\n    this.m_doc = doc;\n    this.m_win = doc.defaultView;\n  }\n\n  /**\n   * If user selected some text in the current window, highlight it.\n   * Else do nothing.\n   * @return the generated Block id or null.\n   */\n  highlightSelection(): string {\n    let block: Block = extractSelectedBlock(window, document);\n    if (block == null) {\n      return null;\n    }\n    let decoratedBlock = this.decorate(block);\n    this.addBlock(decoratedBlock);\n    if (this.m_onHighlight) {\n      this.m_onHighlight(decoratedBlock);\n    }\n    return decoratedBlock.id;\n  }\n\n  /**\n   * @param handler called when a new DecoratedBlock object is built.\n   * It is not guarenteed to be called when the block is rendered in DOM.\n   */\n  setOnHighlightHandler(handler: OnHighlight) {\n    this.m_onHighlight = handler;\n  }\n\n  /**\n   * Rebuild the block with a given meta\n   * @param meta See @class{RangeMeta}\n   * @param id optional, the id for the restored block\n   * @return restored block id\n   */\n  restoreHighlight(meta: RangeMeta, id?: string) {\n    let block = restoreBlock(this.m_win, this.m_doc, meta, id);\n    let decoratedBlock = this.decorate(block);\n    this.addBlock(decoratedBlock);\n    return decoratedBlock.id;\n  }\n\n  /**\n   * Find and remove the block with a given id.\n   * @param id of the block to remove\n   */\n  removeHighlight(id: string): void {\n    for (let ftId in this.m_ftnotes) {\n      let note = this.m_ftnotes[ftId];\n      if (note.removeHighlight(id)) {\n        return;\n      }\n    }\n    warn(`removeHighlight: ${id} not found in any footnotes`);\n  }\n\n  removeAll(): void{\n    for (let ftId in this.m_ftnotes) {\n      let note = this.m_ftnotes[ftId];\n      note.removeAll();\n    }\n  }\n\n  getAllText(): string[] {\n    let notes: string[] = [];\n    for (let key in this.m_ftnotes) {\n      let note = this.m_ftnotes[key];\n      let blocks = note.getAll();\n      for (let blk of blocks) {\n        notes.push(blk.text);\n      }\n      notes.push(\"\");\n    }\n    return notes;\n  }\n\n  generateMarkdownNotes(): string {\n    let title = this.m_doc.title || this.m_doc.head.title;\n    let url = this.m_win.location.toString();\n    let lines = this.getAllText();\n    let noteTitle = `Notes on ${Markdown.link(title, url)}\\r\\n\\r\\n`;\n    let md = Markdown.h(1, noteTitle);\n    let buf = [];\n    for (let idx = 0; idx <= lines.length; idx++) {\n      if (idx == lines.length || lines[idx] == \"\") {\n        if (buf.length > 0) {\n          md += Markdown.ul(buf, 0);\n        }\n        md += \"\\r\\n\";\n        buf.length = 0;\n      } else {\n        buf.push(lines[idx]);\n      }\n    }\n    return md;\n  }\n\n  private decorate(block: Block): DecoratedBlock {\n    let factory = new DecoratedBlockFactory(block);\n    factory.addDecorator(BasicDecorator);\n    return factory.make();\n  }\n\n  private addBlock(blk: DecoratedBlock): void {\n    let ftntId = blk.rangeCache.meta.anchorUPath;\n    if (ftntId in this.m_ftnotes) {\n      let ftnt: Footnote = this.m_ftnotes[ftntId];\n      ftnt.addHighlight(blk);\n      debug(`added to existing ftnt: ${ftntId}`);\n    } else {\n      this.renderFootnote(ftntId, [blk]);\n    }\n  }\n\n  private getOrCreateContainer(cid: string, parent: Node): HTMLElement {\n    let d = this.m_doc.getElementById(cid);\n    if (!d) {\n      d = this.m_doc.createElement(\"div\");\n      d.id = cid;\n      parent.appendChild(d);\n    }\n    return d;\n  }\n\n  private renderFootnote(anchorUPath: string, initBlocks: DecoratedBlock[]): void {\n    debug(`generating new ftnt under : ${anchorUPath}`);\n    let anchor: HTMLElement =\n      getNodeByPath(this.m_doc, anchorUPath) as HTMLElement;\n    const containerId: string = \"ftnt_\" + anchorUPath;\n    let container = this.getOrCreateContainer(containerId, anchor);\n    let ftntEl = React.createElement(Footnote, {\n      id: anchorUPath,\n      source: { get: () => initBlocks, poll: false },\n      onMount: (ins: Footnote) => {\n        this.m_ftnotes[anchorUPath] = ins;\n      }\n    })\n    debug(\"generated under\", container);\n    ReactDOM.render(ftntEl, container);\n  }\n\n\n  protected m_ftnotes: FootnoteDict;\n  protected m_doc: Document;\n  protected m_win: Window;\n  protected m_onHighlight: OnHighlight;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.ts"],"sourceRoot":""}